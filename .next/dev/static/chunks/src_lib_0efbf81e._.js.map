{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/davy/merry_360_frontend/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || process.env.VITE_SUPABASE_URL || ''\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || process.env.VITE_SUPABASE_ANON_KEY || ''\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.error('Missing Supabase environment variables')\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n\nexport default supabase\n"],"names":[],"mappings":";;;;;;AAEoB;AAFpB;;AAEA,MAAM,cAAc,gFAAwC,2KAAO,CAAC,GAAG,CAAC,iBAAiB,IAAI;AAC7F,MAAM,kBAAkB,wPAA6C,2KAAO,CAAC,GAAG,CAAC,sBAAsB,IAAI;AAE3G;;AAIO,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa;uCAEnC"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/davy/merry_360_frontend/src/lib/auth-context.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react'\nimport { supabase } from '@/lib/supabase'\nimport { User } from '@/types'\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  signIn: (email: string, password: string) => Promise<void>\n  signUp: (email: string, password: string, firstName: string, lastName: string) => Promise<void>\n  signOut: () => Promise<void>\n  isAuthenticated: boolean\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // Check active session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      if (session?.user) {\n        loadUserProfile(session.user.id)\n      } else {\n        setLoading(false)\n      }\n    })\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n      if (session?.user) {\n        loadUserProfile(session.user.id)\n      } else {\n        setUser(null)\n        setLoading(false)\n      }\n    })\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  const loadUserProfile = async (userId: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', userId)\n        .single()\n\n      if (error) throw error\n\n      if (data) {\n        setUser({\n          id: data.id,\n          email: data.email,\n          name: `${data.first_name} ${data.last_name}`,\n          firstName: data.first_name,\n          lastName: data.last_name,\n          phone: data.phone || '',\n          role: data.role || 'user',\n          avatarUrl: data.avatar_url,\n          verified: true\n        })\n      }\n    } catch (error) {\n      console.error('Error loading profile:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const signIn = async (email: string, password: string) => {\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email,\n      password\n    })\n\n    if (error) throw error\n    if (data.user) await loadUserProfile(data.user.id)\n  }\n\n  const signUp = async (email: string, password: string, firstName: string, lastName: string) => {\n    const { data, error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        data: {\n          first_name: firstName,\n          last_name: lastName\n        }\n      }\n    })\n\n    if (error) throw error\n\n    // Create profile\n    if (data.user) {\n      await supabase.from('profiles').insert({\n        id: data.user.id,\n        email: data.user.email,\n        first_name: firstName,\n        last_name: lastName\n      })\n    }\n  }\n\n  const signOut = async () => {\n    await supabase.auth.signOut()\n    setUser(null)\n  }\n\n  return (\n    <AuthContext.Provider value={{\n      user,\n      loading,\n      signIn,\n      signUp,\n      signOut,\n      isAuthenticated: !!user\n    }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":"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"}}]
}